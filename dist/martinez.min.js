/**
 * martinez v0.7.3
 * Martinez polygon clipping algorithm, does boolean operation on polygons (multipolygons, polygons with holes etc): intersection, union, difference, xor
 *
 * @author Alex Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */
(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports):typeof define==="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!=="undefined"?globalThis:t||self,e(t.martinez={}))})(this,function(t){"use strict";function i(t,e){return t>e?1:t<e?-1:0}var d=function t(e,r){if(e===void 0)e=i;if(r===void 0)r=false;this._compare=e;this._root=null;this._size=0;this._noDuplicates=!!r};var e={size:{configurable:true}};d.prototype.rotateLeft=function t(e){var r=e.right;if(r){e.right=r.left;if(r.left){r.left.parent=e}r.parent=e.parent}if(!e.parent){this._root=r}else if(e===e.parent.left){e.parent.left=r}else{e.parent.right=r}if(r){r.left=e}e.parent=r};d.prototype.rotateRight=function t(e){var r=e.left;if(r){e.left=r.right;if(r.right){r.right.parent=e}r.parent=e.parent}if(!e.parent){this._root=r}else if(e===e.parent.left){e.parent.left=r}else{e.parent.right=r}if(r){r.right=e}e.parent=r};d.prototype._splay=function t(e){while(e.parent){var r=e.parent;if(!r.parent){if(r.left===e){this.rotateRight(r)}else{this.rotateLeft(r)}}else if(r.left===e&&r.parent.left===r){this.rotateRight(r.parent);this.rotateRight(r)}else if(r.right===e&&r.parent.right===r){this.rotateLeft(r.parent);this.rotateLeft(r)}else if(r.left===e&&r.parent.right===r){this.rotateRight(r);this.rotateLeft(r)}else{this.rotateLeft(r);this.rotateRight(r)}}};d.prototype.splay=function t(e){var r,i,n,o,a;while(e.parent){r=e.parent;i=r.parent;if(i&&i.parent){n=i.parent;if(n.left===i){n.left=e}else{n.right=e}e.parent=n}else{e.parent=null;this._root=e}o=e.left;a=e.right;if(e===r.left){if(i){if(i.left===r){if(r.right){i.left=r.right;i.left.parent=i}else{i.left=null}r.right=i;i.parent=r}else{if(o){i.right=o;o.parent=i}else{i.right=null}e.left=i;i.parent=e}}if(a){r.left=a;a.parent=r}else{r.left=null}e.right=r;r.parent=e}else{if(i){if(i.right===r){if(r.left){i.right=r.left;i.right.parent=i}else{i.right=null}r.left=i;i.parent=r}else{if(a){i.left=a;a.parent=i}else{i.left=null}e.right=i;i.parent=e}}if(o){r.right=o;o.parent=r}else{r.right=null}e.left=r;r.parent=e}}};d.prototype.replace=function t(e,r){if(!e.parent){this._root=r}else if(e===e.parent.left){e.parent.left=r}else{e.parent.right=r}if(r){r.parent=e.parent}};d.prototype.minNode=function t(e){if(e===void 0)e=this._root;if(e){while(e.left){e=e.left}}return e};d.prototype.maxNode=function t(e){if(e===void 0)e=this._root;if(e){while(e.right){e=e.right}}return e};d.prototype.insert=function t(e,r){var i=this._root;var n=null;var o=this._compare;var a;if(this._noDuplicates){while(i){n=i;a=o(i.key,e);if(a===0){return}else if(o(i.key,e)<0){i=i.right}else{i=i.left}}}else{while(i){n=i;if(o(i.key,e)<0){i=i.right}else{i=i.left}}}i={key:e,data:r,left:null,right:null,parent:n};if(!n){this._root=i}else if(o(n.key,i.key)<0){n.right=i}else{n.left=i}this.splay(i);this._size++;return i};d.prototype.find=function t(e){var r=this._root;var i=this._compare;while(r){var n=i(r.key,e);if(n<0){r=r.right}else if(n>0){r=r.left}else{return r}}return null};d.prototype.contains=function t(e){var r=this._root;var i=this._compare;while(r){var n=i(e,r.key);if(n===0){return true}else if(n<0){r=r.left}else{r=r.right}}return false};d.prototype.remove=function t(e){var r=this.find(e);if(!r){return false}this.splay(r);if(!r.left){this.replace(r,r.right)}else if(!r.right){this.replace(r,r.left)}else{var i=this.minNode(r.right);if(i.parent!==r){this.replace(i,i.right);i.right=r.right;i.right.parent=i}this.replace(r,i);i.left=r.left;i.left.parent=i}this._size--;return true};d.prototype.removeNode=function t(e){if(!e){return false}this.splay(e);if(!e.left){this.replace(e,e.right)}else if(!e.right){this.replace(e,e.left)}else{var r=this.minNode(e.right);if(r.parent!==e){this.replace(r,r.right);r.right=e.right;r.right.parent=r}this.replace(e,r);r.left=e.left;r.left.parent=r}this._size--;return true};d.prototype.erase=function t(e){var r=this.find(e);if(!r){return}this.splay(r);var i=r.left;var n=r.right;var o=null;if(i){i.parent=null;o=this.maxNode(i);this.splay(o);this._root=o}if(n){if(i){o.right=n}else{this._root=n}n.parent=o}this._size--};d.prototype.pop=function t(){var e=this._root,r=null;if(e){while(e.left){e=e.left}r={key:e.key,data:e.data};this.remove(e.key)}return r};d.prototype.next=function t(e){var r=e;if(r){if(r.right){r=r.right;while(r&&r.left){r=r.left}}else{r=e.parent;while(r&&r.right===e){e=r;r=r.parent}}}return r};d.prototype.prev=function t(e){var r=e;if(r){if(r.left){r=r.left;while(r&&r.right){r=r.right}}else{r=e.parent;while(r&&r.left===e){e=r;r=r.parent}}}return r};d.prototype.forEach=function t(e){var r=this._root;var i=[],n=false,o=0;while(!n){if(r){i.push(r);r=r.left}else{if(i.length>0){r=i.pop();e(r,o++);r=r.right}else{n=true}}}return this};d.prototype.range=function t(e,r,i,n){var o=[];var a=this._compare;var f=this._root,l;while(o.length!==0||f){if(f){o.push(f);f=f.left}else{f=o.pop();l=a(f.key,r);if(l>0){break}else if(a(f.key,e)>=0){if(i.call(n,f)){return this}}f=f.right}}return this};d.prototype.keys=function t(){var e=this._root;var r=[],i=[],n=false;while(!n){if(e){r.push(e);e=e.left}else{if(r.length>0){e=r.pop();i.push(e.key);e=e.right}else{n=true}}}return i};d.prototype.values=function t(){var e=this._root;var r=[],i=[],n=false;while(!n){if(e){r.push(e);e=e.left}else{if(r.length>0){e=r.pop();i.push(e.data);e=e.right}else{n=true}}}return i};d.prototype.at=function t(e){var r=this._root;var i=[],n=false,o=0;while(!n){if(r){i.push(r);r=r.left}else{if(i.length>0){r=i.pop();if(o===e){return r}o++;r=r.right}else{n=true}}}return null};d.prototype.load=function t(e,r,i){if(e===void 0)e=[];if(r===void 0)r=[];if(i===void 0)i=false;if(this._size!==0){throw new Error("bulk-load: tree is not empty")}var n=e.length;if(i){s(e,r,0,n-1,this._compare)}this._root=u(null,e,r,0,n);this._size=n;return this};d.prototype.min=function t(){var e=this.minNode(this._root);if(e){return e.key}else{return null}};d.prototype.max=function t(){var e=this.maxNode(this._root);if(e){return e.key}else{return null}};d.prototype.isEmpty=function t(){return this._root===null};e.size.get=function(){return this._size};d.createTree=function t(e,r,i,n,o){return new d(i,o).load(e,r,n)};Object.defineProperties(d.prototype,e);function u(t,e,r,i,n){var o=n-i;if(o>0){var a=i+Math.floor(o/2);var f=e[a];var l=r[a];var s={key:f,data:l,parent:t};s.left=u(s,e,r,i,a);s.right=u(s,e,r,a+1,n);return s}return null}function s(t,e,r,i,n){if(r>=i){return}var o=t[r+i>>1];var a=r-1;var f=i+1;while(true){do{a++}while(n(t[a],o)<0);do{f--}while(n(t[f],o)>0);if(a>=f){break}var l=t[a];t[a]=t[f];t[f]=l;l=e[a];e[a]=e[f];e[f]=l}s(t,e,r,f,n);s(t,e,f+1,i,n)}var a=0;var l=1;var h=2;var p=3;var y=0;var f=1;var w=2;var v=3;var E=function(t,e,r){if(e===null){t.inOut=false;t.otherInOut=true}else{if(t.isSubject===e.isSubject){t.inOut=!e.inOut;t.otherInOut=e.otherInOut}else{t.inOut=!e.otherInOut;t.otherInOut=e.isVertical()?!e.inOut:e.inOut}if(e){t.prevInResult=!n(e,r)||e.isVertical()?e.prevInResult:e}}var i=n(t,r);if(i){t.resultTransition=o(t,r)}else{t.resultTransition=0}};var n=function(t,e){switch(t.type){case a:switch(e){case y:return!t.otherInOut;case f:return t.otherInOut;case w:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case v:return true}break;case h:return e===y||e===f;case p:return e===w;case l:return false}return false};var o=function(t,e){var r=!t.inOut;var i=!t.otherInOut;var n;switch(e){case y:n=r&&i;break;case f:n=r||i;break;case v:n=r^i;break;case w:if(t.isSubject){n=r&&!i}else{n=i&&!r}break}return n?+1:-1};var c=function t(e,r,i,n,o){this.left=r;this.point=e;this.otherEvent=i;this.isSubject=n;this.type=o||a;this.inOut=false;this.otherInOut=false;this.prevInResult=null;this.resultTransition=0;this.otherPos=-1;this.outputContourId=-1;this.isExteriorRing=true};var r={inResult:{configurable:true}};c.prototype.isBelow=function t(e){var r=this.point;var i=this.otherEvent.point;return this.left?(r[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(r[1]-e[1])>0:(i[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(i[1]-e[1])>0};c.prototype.isAbove=function t(e){return!this.isBelow(e)};c.prototype.isVertical=function t(){return this.point[0]===this.otherEvent.point[0]};r.inResult.get=function(){return this.resultTransition!==0};c.prototype.clone=function t(){var e=new c(this.point,this.left,this.otherEvent,this.isSubject,this.type);e.contourId=this.contourId;e.resultTransition=this.resultTransition;e.prevInResult=this.prevInResult;e.isExteriorRing=this.isExteriorRing;e.inOut=this.inOut;e.otherInOut=this.otherInOut;return e};Object.defineProperties(c.prototype,r);var g=function(t,e){if(t[0]===e[0]){if(t[1]===e[1]){return true}else{return false}}return false};var I=11102230246251565e-32;var P=134217729;var L=(3+8*I)*I;function B(t,e,r,i,n){var o,a,f,l;var s=e[0];var u=i[0];var h=0;var p=0;if(u>s===u>-s){o=s;s=e[++h]}else{o=u;u=i[++p]}var v=0;if(h<t&&p<r){if(u>s===u>-s){a=s+o;f=o-(a-s);s=e[++h]}else{a=u+o;f=o-(a-u);u=i[++p]}o=a;if(f!==0){n[v++]=f}while(h<t&&p<r){if(u>s===u>-s){a=o+s;l=a-o;f=o-(a-l)+(s-l);s=e[++h]}else{a=o+u;l=a-o;f=o-(a-l)+(u-l);u=i[++p]}o=a;if(f!==0){n[v++]=f}}}while(h<t){a=o+s;l=a-o;f=o-(a-l)+(s-l);s=e[++h];o=a;if(f!==0){n[v++]=f}}while(p<r){a=o+u;l=a-o;f=o-(a-l)+(u-l);u=i[++p];o=a;if(f!==0){n[v++]=f}}if(o!==0||v===0){n[v++]=o}return v}function C(t,e){var r=e[0];for(var i=1;i<t;i++){r+=e[i]}return r}function _(t){return new Float64Array(t)}var b=(3+16*I)*I;var A=(2+12*I)*I;var D=(9+64*I)*I*I;var F=_(4);var V=_(8);var U=_(12);var X=_(16);var q=_(4);function O(t,e,r,i,n,o,a){var f,l,s,u;var h,p,v,c,g,d,y,w,E,I,_,b,O,k;var m=t-n;var R=r-n;var x=e-o;var j=i-o;I=m*j;p=P*m;v=p-(p-m);c=m-v;p=P*j;g=p-(p-j);d=j-g;_=c*d-(I-v*g-c*g-v*d);b=x*R;p=P*x;v=p-(p-x);c=x-v;p=P*R;g=p-(p-R);d=R-g;O=c*d-(b-v*g-c*g-v*d);y=_-O;h=_-y;F[0]=_-(y+h)+(h-O);w=I+y;h=w-I;E=I-(w-h)+(y-h);y=E-b;h=E-y;F[1]=E-(y+h)+(h-b);k=w+y;h=k-w;F[2]=w-(k-h)+(y-h);F[3]=k;var S=C(4,F);var N=A*a;if(S>=N||-S>=N){return S}h=t-m;f=t-(m+h)+(h-n);h=r-R;s=r-(R+h)+(h-n);h=e-x;l=e-(x+h)+(h-o);h=i-j;u=i-(j+h)+(h-o);if(f===0&&l===0&&s===0&&u===0){return S}N=D*a+L*Math.abs(S);S+=m*u+j*f-(x*s+R*l);if(S>=N||-S>=N){return S}I=f*j;p=P*f;v=p-(p-f);c=f-v;p=P*j;g=p-(p-j);d=j-g;_=c*d-(I-v*g-c*g-v*d);b=l*R;p=P*l;v=p-(p-l);c=l-v;p=P*R;g=p-(p-R);d=R-g;O=c*d-(b-v*g-c*g-v*d);y=_-O;h=_-y;q[0]=_-(y+h)+(h-O);w=I+y;h=w-I;E=I-(w-h)+(y-h);y=E-b;h=E-y;q[1]=E-(y+h)+(h-b);k=w+y;h=k-w;q[2]=w-(k-h)+(y-h);q[3]=k;var T=B(4,F,4,q,V);I=m*u;p=P*m;v=p-(p-m);c=m-v;p=P*u;g=p-(p-u);d=u-g;_=c*d-(I-v*g-c*g-v*d);b=x*s;p=P*x;v=p-(p-x);c=x-v;p=P*s;g=p-(p-s);d=s-g;O=c*d-(b-v*g-c*g-v*d);y=_-O;h=_-y;q[0]=_-(y+h)+(h-O);w=I+y;h=w-I;E=I-(w-h)+(y-h);y=E-b;h=E-y;q[1]=E-(y+h)+(h-b);k=w+y;h=k-w;q[2]=w-(k-h)+(y-h);q[3]=k;var z=B(T,V,4,q,U);I=f*u;p=P*f;v=p-(p-f);c=f-v;p=P*u;g=p-(p-u);d=u-g;_=c*d-(I-v*g-c*g-v*d);b=l*s;p=P*l;v=p-(p-l);c=l-v;p=P*s;g=p-(p-s);d=s-g;O=c*d-(b-v*g-c*g-v*d);y=_-O;h=_-y;q[0]=_-(y+h)+(h-O);w=I+y;h=w-I;E=I-(w-h)+(y-h);y=E-b;h=E-y;q[1]=E-(y+h)+(h-b);k=w+y;h=k-w;q[2]=w-(k-h)+(y-h);q[3]=k;var M=B(z,U,4,q,X);return X[M-1]}function k(t,e,r,i,n,o){var a=(e-o)*(r-n);var f=(t-n)*(i-o);var l=a-f;if(a===0||f===0||a>0!==f>0){return l}var s=Math.abs(a+f);if(Math.abs(l)>=b*s){return l}return-O(t,e,r,i,n,o,s)}var m=function(t,e,r){var i=k(t[0],t[1],e[0],e[1],r[0],r[1]);if(i>0){return-1}if(i<0){return 1}return 0};var R=function(t,e){var r=t.point;var i=e.point;if(r[0]>i[0]){return 1}if(r[0]<i[0]){return-1}if(r[1]!==i[1]){return r[1]>i[1]?1:-1}return x(t,e,r)};var x=function(t,e,r,i){if(t.left!==e.left){return t.left?1:-1}if(m(r,t.otherEvent.point,e.otherEvent.point)!==0){return!t.isBelow(e.otherEvent.point)?1:-1}return!t.isSubject&&e.isSubject?1:-1};var j=function(t,e,r){var i=new c(e,false,t,t.isSubject);var n=new c(e,true,t.otherEvent,t.isSubject);if(g(t.point,t.otherEvent.point)){console.warn("what is that, a collapsed segment?",t)}i.contourId=n.contourId=t.contourId;if(R(n,t.otherEvent)>0){t.otherEvent.left=true;n.left=false}t.otherEvent.otherEvent=n;t.otherEvent=i;r.push(n);r.push(i);return r};var S=function(t,e){return t[0]*e[1]-t[1]*e[0]};var N=function(t,e){return t[0]*e[0]+t[1]*e[1]};var T=function(t,e,r,i,n){var o=[e[0]-t[0],e[1]-t[1]];var a=[i[0]-r[0],i[1]-r[1]];var f=function(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]};var l=[r[0]-t[0],r[1]-t[1]];var s=S(o,a);var u=s*s;var h=N(o,o);if(u>0){var p=S(l,a)/s;if(p<0||p>1){return null}var v=S(l,o)/s;if(v<0||v>1){return null}if(p===0||p===1){return n?null:[f(t,p,o)]}if(v===0||v===1){return n?null:[f(r,v,a)]}return[f(t,p,o)]}s=S(l,o);u=s*s;if(u>0){return null}var c=N(o,l)/h;var g=c+N(o,a)/h;var d=Math.min(c,g);var y=Math.max(c,g);if(d<=1&&y>=0){if(d===1){return n?null:[f(t,d>0?d:0,o)]}if(y===0){return n?null:[f(t,y<1?y:1,o)]}if(n&&d===0&&y===1){return null}return[f(t,d>0?d:0,o),f(t,y<1?y:1,o)]}return null};var z=function(t,e,r){var i=T(t.point,t.otherEvent.point,e.point,e.otherEvent.point);var n=i?i.length:0;if(n===0){return 0}if(n===1&&(g(t.point,e.point)||g(t.otherEvent.point,e.otherEvent.point))){return 0}if(n===2&&t.isSubject===e.isSubject){return 0}if(n===1){if(!g(t.point,i[0])&&!g(t.otherEvent.point,i[0])){j(t,i[0],r)}if(!g(e.point,i[0])&&!g(e.otherEvent.point,i[0])){j(e,i[0],r)}return 1}var o=[];var a=false;var f=false;if(g(t.point,e.point)){a=true}else if(R(t,e)===1){o.push(e,t)}else{o.push(t,e)}if(g(t.otherEvent.point,e.otherEvent.point)){f=true}else if(R(t.otherEvent,e.otherEvent)===1){o.push(e.otherEvent,t.otherEvent)}else{o.push(t.otherEvent,e.otherEvent)}if(a&&f||a){e.type=l;t.type=e.inOut===t.inOut?h:p;if(a&&!f){j(o[1].otherEvent,o[0].point,r)}return 2}if(f){j(o[0],o[1].point,r);return 3}if(o[0]!==o[3].otherEvent){j(o[0],o[1].point,r);j(o[1],o[2].point,r);return 3}j(o[0],o[1].point,r);j(o[3].otherEvent,o[2].point,r);return 3};var M=function(t,e){if(t===e){return 0}if(m(t.point,t.otherEvent.point,e.point)!==0||m(t.point,t.otherEvent.point,e.otherEvent.point)!==0){if(g(t.point,e.point)){return t.isBelow(e.otherEvent.point)?-1:1}if(t.point[0]===e.point[0]){return t.point[1]<e.point[1]?-1:1}if(R(t,e)===1){return e.isAbove(t.point)?-1:1}return t.isBelow(e.point)?-1:1}if(t.isSubject===e.isSubject){var r=t.point;var i=e.point;if(r[0]===i[0]&&r[1]===i[1]){r=t.otherEvent.point;i=e.otherEvent.point;if(r[0]===i[0]&&r[1]===i[1]){return 0}else{return t.contourId>e.contourId?1:-1}}}else{return t.isSubject?-1:1}return R(t,e)===1?1:-1};var G=function(t,e,r,i,n,o){var a=new d(M);var f=[];var l=Math.min(i[2],n[2]);var s,u,h;while(t.length!==0){var p=t.pop();f.push(p);if(o===y&&p.point[0]>l||o===w&&p.point[0]>i[2]){break}if(p.left){u=s=a.insert(p);h=a.minNode();if(s!==h){s=a.prev(s)}else{s=null}u=a.next(u);var v=s?s.key:null;var c=void 0;E(p,v,o);if(u){if(z(p,u.key,t)===2){E(p,v,o);E(u.key,p,o)}}if(s){if(z(s.key,p,t)===2){var g=s;if(g!==h){g=a.prev(g)}else{g=null}c=g?g.key:null;E(v,c,o);E(p,v,o)}}}else{p=p.otherEvent;u=s=a.find(p);if(s&&u){if(s!==h){s=a.prev(s)}else{s=null}u=a.next(u);a.remove(p);if(u&&s){z(s.key,u.key,t)}}}}return f};var H=function t(){this.points=[];this.holeIds=[];this.holeOf=null;this.depth=null};H.prototype.isExterior=function t(){return this.holeOf==null};var J=function(t){var e,r,i,n;var o=[];for(r=0,i=t.length;r<i;r++){e=t[r];if(e.left&&e.inResult||!e.left&&e.otherEvent.inResult){o.push(e)}}var a=false;while(!a){a=true;for(r=0,i=o.length;r<i;r++){if(r+1<i&&R(o[r],o[r+1])===1){n=o[r];o[r]=o[r+1];o[r+1]=n;a=false}}}for(r=0,i=o.length;r<i;r++){e=o[r];e.otherPos=r}for(r=0,i=o.length;r<i;r++){e=o[r];if(!e.left){n=e.otherPos;e.otherPos=e.otherEvent.otherPos;e.otherEvent.otherPos=n}}return o};var K=function(t,e,r,i){var n=e[t].point;var o=t+1;var a;var f=e.length;if(o<f){a=e[o].point}while(o<f&&a[0]===n[0]&&a[1]===n[1]){if(!r[o]){return o}else{o++}if(o<f){a=e[o].point}}o=t-1;while(r[o]&&o>i){o--}return o};var Q=function(t,e,r){var i=new H;if(t.prevInResult!=null){var n=t.prevInResult;var o=n.outputContourId;var a=n.resultTransition;if(a>0){var f=e[o];if(f.holeOf!=null){var l=f.holeOf;e[l].holeIds.push(r);i.holeOf=l;i.depth=e[o].depth}else{e[o].holeIds.push(r);i.holeOf=o;i.depth=e[o].depth+1}}else{i.holeOf=null;i.depth=e[o].depth}}else{i.holeOf=null;i.depth=0}return i};var W=function(t){var a,e;var f=J(t);var l={};var s=[];var r=function(){if(l[a]){return}var e=s.length;var t=Q(f[a],s,e);var r=function(t){l[t]=true;if(t<f.length&&f[t]){f[t].outputContourId=e}};var i=a;var n=a;var o=f[a].point;t.points.push(o);while(true){r(i);i=f[i].otherPos;r(i);t.points.push(f[i].point);i=K(i,f,l,n);if(i===n||i>=f.length||!f[i]){break}}s.push(t)};for(a=0,e=f.length;a<e;a++)r();return s};var Y={exports:{}};Y.exports=Z;Y.exports.default=Z;function Z(t,e){if(!(this instanceof Z)){return new Z(t,e)}this.data=t||[];this.length=this.data.length;this.compare=e||$;if(this.length>0){for(var r=(this.length>>1)-1;r>=0;r--){this._down(r)}}}function $(t,e){return t<e?-1:t>e?1:0}Z.prototype={push:function(t){this.data.push(t);this.length++;this._up(this.length-1)},pop:function(){if(this.length===0){return undefined}var t=this.data[0];this.length--;if(this.length>0){this.data[0]=this.data[this.length];this._down(0)}this.data.pop();return t},peek:function(){return this.data[0]},_up:function(t){var e=this.data;var r=this.compare;var i=e[t];while(t>0){var n=t-1>>1;var o=e[n];if(r(i,o)>=0){break}e[t]=o;t=n}e[t]=i},_down:function(t){var e=this.data;var r=this.compare;var i=this.length>>1;var n=e[t];while(t<i){var o=(t<<1)+1;var a=o+1;var f=e[o];if(a<this.length&&r(e[a],f)<0){o=a;f=e[a]}if(r(f,n)>=0){break}e[t]=f;t=o}e[t]=n}};var tt=Y.exports;var et=Math.max;var rt=Math.min;var it=0;var nt=function(t,e,r,i,n,o){var a,f,l,s,u,h;for(a=0,f=t.length-1;a<f;a++){l=t[a];s=t[a+1];u=new c(l,false,undefined,e);h=new c(s,false,u,e);u.otherEvent=h;if(l[0]===s[0]&&l[1]===s[1]){continue}u.contourId=h.contourId=r;if(!o){u.isExteriorRing=false;h.isExteriorRing=false}if(R(u,h)>0){h.left=true}else{u.left=true}var p=l[0];var v=l[1];n[0]=rt(n[0],p);n[1]=rt(n[1],v);n[2]=et(n[2],p);n[3]=et(n[3],v);i.push(u);i.push(h)}};var ot=function(t,e,r,i,n){var o=new tt(null,R);var a,f,l,s,u,h;for(l=0,s=t.length;l<s;l++){a=t[l];for(u=0,h=a.length;u<h;u++){f=u===0;if(f){it++}nt(a[u],true,it,o,r,f)}}for(l=0,s=e.length;l<s;l++){a=e[l];for(u=0,h=a.length;u<h;u++){f=u===0;if(n===w){f=false}if(f){it++}nt(a[u],false,it,o,i,f)}}return o};var at=[];var ft=function(t,e,r){var i=null;if(t.length*e.length===0){if(r===y){i=at}else if(r===w){i=t}else if(r===f||r===v){i=t.length===0?e:t}}return i};var lt=function(t,e,r,i,n){var o=null;if(r[0]>i[2]||i[0]>r[2]||r[1]>i[3]||i[1]>r[3]){if(n===y){o=at}else if(n===w){o=t}else if(n===f||n===v){o=t.concat(e)}}return o};var st=function(t,e,r){if(typeof t[0][0][0]==="number"){t=[t]}if(typeof e[0][0][0]==="number"){e=[e]}var i=ft(t,e,r);if(i){return i===at?null:i}var n=[Infinity,Infinity,-Infinity,-Infinity];var o=[Infinity,Infinity,-Infinity,-Infinity];var a=ot(t,e,n,o,r);i=lt(t,e,n,o,r);if(i){return i===at?null:i}var f=G(a,t,e,n,o,r);var l=W(f);var s=[];for(var u=0;u<l.length;u++){var h=l[u];if(h.isExterior()){var p=[h.points];for(var v=0;v<h.holeIds.length;v++){var c=h.holeIds[v];p.push(l[c].points)}s.push(p)}}return s};function ut(t,e){return st(t,e,f)}function ht(t,e){return st(t,e,w)}function pt(t,e){return st(t,e,v)}function vt(t,e){return st(t,e,y)}var ct={UNION:f,DIFFERENCE:w,INTERSECTION:y,XOR:v};t.diff=ht;t.intersection=vt;t.operations=ct;t.union=ut;t.xor=pt;Object.defineProperty(t,"__esModule",{value:true})});